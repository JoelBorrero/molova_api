{% extends "base.html" %}
{% block content %}
<h1>Crawling</h1>
<div class="row">
    <div class="col-4">
        <form action="javascript:post('/api/v1/crawler/process/start_crawling/', 'Bershka')" method="post">
            <label>Bershka ({{Bershka}})</label><br>
            <input type="submit" value="Iniciar">
        </form>
    </div>
    <div class="col-4">
        <form action="javascript:post('/api/v1/crawler/process/start_crawling/', 'Mango')">
            <label>Mango ({{Mango}})</label><br>
            <input type="submit" value="Iniciar">
        </form>
    </div>
    <div class="col-4">
        <form action="javascript:post('/api/v1/crawler/process/start_crawling/', 'Pull & Bear')">
            <label>Pull & Bear ({{Pull}})</label><br>
            <input type="submit" value="Iniciar">
        </form>
    </div>
    <div class="col-4">
        <form action="javascript:post('/api/v1/crawler/process/start_crawling/', 'Stradivarius')">
            <label>Stradivarius ({{Stradivarius}})</label><br>
            <input type="submit" value="Iniciar">
        </form>
    </div>
    <div class="col-4">
        <form action="javascript:post('/api/v1/crawler/process/start_crawling/', 'Solua Accesorios')">
            <label>Sol√∫a ({{Solua}})</label><br>
            <input type="submit" value="Iniciar">
        </form>
    </div>
</div>
<div >
    <form action="javascript:post('/api/v1/crawler/process/sync/', 'Sincronizar')">
        <label>Sincronizar</label><br>
        <input type="submit" value="Iniciar">
    </form>
</div>

<script>
    function post(endpoint, brand) {
        fetch(endpoint, {
            method: 'POST',
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": get_cookie("csrftoken"),
            },
            body: JSON.stringify({'brand': brand})
        }).then((result) => {
            alert('Process started');
        })
    }
</script>
{% endblock content %}